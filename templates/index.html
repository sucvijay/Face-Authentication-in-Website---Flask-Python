<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css" >
    <link href='https://fonts.googleapis.com/css?family=Fira Sans' rel='stylesheet'>

</head>
<body>
    <nav>
        <a href="register.html" id="register" >REGISTER</a>
    </nav>

    <div class="main">
<img src="bg.webp" />

        <div class="loginbox" >
               <h2 style="text-align: center;">LOGIN</h2>


            <form action="/profile" id="logForm"  method="post" id="lForm">

                <div id="inp">
                <input type="text" id="id" name="email" placeholder="USER ID / EMAIL" >
                <input type="password" id="id" name="password" placeholder="PASSWORD" >
                <button class="button" type="button" onclick="login()" style="display: block;" >Scan Face</button>

                <a href="forget">FORGOT PASSWORD</a>
            </div>

                <div id="camera">

                </div>
     




            </form>

        </div>
    
    
    </div>


    <footer>
        LOGIN WITH FACE RECOGNITION
    </footer>


    <script>



        const login = () => {
            const old = document.getElementById("inp")
            old.style.display= "none";

            const form = document.getElementById("camera")

            form.innerHTML = `                            <div style="width:100%;height: 300px;display:flex;align-items:center;flex-direction:column">
                <video id="video" autoplay class="video"> </video>
                <canvas id="canvas" style="overflow:auto;display:none"></canvas>
                <button style="margin-top: 10px;margin-bottom:10px;" class="captureBtn" onclick="capture()" >Login Now</button>
            </div>           <input type="text" id="imgData" name="imgdata" style="display: none;" >`

            var video = document.querySelector("video");

        if (navigator.mediaDevices.getUserMedia) {
          navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
              video.srcObject = stream;
            })
            .catch(function (err0r) {
              console.log("Something went wrong!");
            });
        }


        }



        var resultb64="";
        async function capture() {       
           var canvas = document.getElementById('canvas');     
           var video = document.getElementById('video');
           canvas.width = video.videoWidth;
           canvas.height = video.videoHeight;
           canvas.getContext('2d').drawImage(video, 0, 0);  
           const img = document.getElementById("imgData");
           img.value = canvas.toDataURL();


           const form = document.getElementById("lForm");

       form.submit();

        }
        

    </script>
    
</body>
</html>